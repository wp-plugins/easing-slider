(function(a){window.Customizations=Backbone.Model.extend({initialize:function(){this.on("change",function(){a("#customizations").val(JSON.stringify(this.attributes))},this)}});window.CustomizeView=Backbone.View.extend({events:{change:"change"},initialize:function(){var b=this,c={};this.$el=this.options.$el;a(".customize-section-title").bind("click",function(){var d=a(this).parent();if(!d.hasClass("open")){a(".customize-section").removeClass("open");d.addClass("open")}else{a(".customize-section").removeClass("open")}});a(".collapse-sidebar").bind("click",function(){var d=a(".wp-full-overlay");if(d.hasClass("expanded")){d.removeClass("expanded").addClass("collapsed")}else{d.removeClass("collapsed").addClass("expanded")}});a(".color-picker-hex").each(function(){a(this).wpColorPicker({change:function(d){b.change(d)},defaultColor:a(this).attr("data-default")})})},validate:function(c,b){for(var d in c){if(d=="background-image"){c[d]="url("+c[d]+")"}if(d=="border-width"){c["border-style"]="solid";a(".easingsliderlite-shadow").css({"margin-left":c[d]+"px"})}if(d=="height"&&b==".easingsliderlite-arrows"){c["margin-top"]="-"+Math.floor(c[d]/2)+"px"}if(d=="shadow-enable"){c.display=(c[d]=="true")?"block":"none";if(a("img",b).length==0){a(b).append('<img src="'+a('input[data-property="shadow-image"]').val()+'" alt="" />')}delete c[d]}if(d=="shadow-image"){a(b).html('<img src="'+c[d]+'" alt="" />');delete c[d]}if(d=="width"||d=="height"||d=="border-width"||d=="border-radius"){c[d]=c[d]+"px"}}return c},change:function(h){var d=h.target.name.split("["),g=d[0],i=d[1].replace("]",""),c=this.model.get(g),b={},f={};c[i]=h.target.value;b[g]=c;this.model.set(b).trigger("change");f[h.target.dataset.property]=h.target.value;a(h.target.dataset.selector).css(this.validate(f,h.target.dataset.selector))},render:function(){this.$el.find(".wp-full-overlay").animate({opacity:1},{duration:200})}});a(document).ready(function(){window.customizeView=new CustomizeView({$el:a("#customize-container"),model:new Customizations(JSON.parse(a("#customizations").val()))}).render()})})(jQuery);